(this.webpackJsonpmilkyway=this.webpackJsonpmilkyway||[]).push([[0],{33:function(e,t,a){},40:function(e,t,a){e.exports=a.p+"static/media/noImage.227f4aa0.png"},42:function(e,t,a){e.exports=a(55)},47:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),c=a.n(o),i=(a(47),a(19)),l=a(9),d=a(10),u=a(13),s=a(12),m=a(15),f=a(62),h=a(63),g=a(57),v=r.a.createContext(),p=v.Provider,y=(v.Consumer,v),b=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n.onClickHandler=n.onClickHandler.bind(Object(m.a)(n)),n}return Object(d.a)(a,[{key:"onClickHandler",value:function(e){var t=e.target.id;this.context.setVal({key:"currentTab",value:t})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(f.a,{bg:"dark",variant:"dark"},r.a.createElement(f.a.Brand,{href:"#home"},"Barcode Scanner"),r.a.createElement(h.a,{className:"mr-auto"},r.a.createElement(g.a,{variant:"dark",id:"fileScan",onClick:this.onClickHandler},"File Scan"),r.a.createElement(g.a,{variant:"dark",id:"liveScan",onClick:this.onClickHandler},"Live Scan"),r.a.createElement(g.a,{variant:"dark",id:"history",onClick:this.onClickHandler},"Histroy"))))}}]),a}(r.a.Component);b.contextType=y;var E=b,k=a(28),x=a.n(k),j=a(39),w=a(58),O=a(59),T=a(60),R=a(64),_=a(61),S=(a(33),a(40)),C=a.n(S),B=a(5),I=a.n(B),D=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n.triggerInputFile=n.triggerInputFile.bind(Object(m.a)(n)),n}return Object(d.a)(a,[{key:"highlightBarcode",value:function(e){console.log("barcode",e);var t=e.box,a=void 0===t?[]:t,n=document.getElementById("uploaded-image"),r=document.getElementById("my-canvas");r.style.position="absolute",r.style.left=n.offsetLeft+"px",r.style.top=n.offsetTop+"px";var o=r.getContext("2d");o.beginPath();var c=a[0];o.moveTo(c[0],c[1]),c=a[1],o.lineTo(c[0],c[1]),o.stroke(),o.moveTo(c[0],c[1]),c=a[2],o.lineTo(c[0],c[1]),o.stroke(),o.moveTo(c[0],c[1]),c=a[3],o.lineTo(c[0],c[1]),o.stroke(),o.moveTo(c[0],c[1]),c=a[0],o.lineTo(c[0],c[1]),o.stroke(),o.lineWidth=3,o.strokeStyle="#ff0000",o.stroke()}},{key:"imageToDataUri",value:function(e,t,a){var n=document.createElement("canvas"),r=n.getContext("2d");return n.width=t,n.height=a,r.drawImage(e,0,0,t,a),n.toDataURL("image/jpeg",1)}},{key:"handleChange",value:function(){var e=Object(j.a)(x.a.mark((function e(t){var a,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files,n=a[0],e.next=4,this.toBase64(n);case 4:r=e.sent,this.setState({uploadedImage:r,isLoading:!0},(function(){})),this.scanFileForBarcode(r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"triggerInputFile",value:function(){this.fileInput.click()}},{key:"addToHistory",value:function(e){var t=this.context.history,a=void 0===t?[]:t;a.push(e),this.context.setVal({key:"history",value:a})}},{key:"scanFileForBarcode",value:function(e){var t=this;I.a.decodeSingle({decoder:{readers:["code_128_reader","ean_5_reader","upc_reader","ean_reader","ean_8_reader","ean_2_reader","code_39_reader","code_93_reader"]},locate:!0,size:536,src:e},(function(a){a.codeResult?(t.addToHistory({img:e,barcode:a.codeResult.code,barcodeType:a.codeResult.format,time:new Date}),t.highlightBarcode(a),t.setState({barcodeDetected:a.codeResult.code,barcodeType:a.codeResult.format,isLoading:!1})):(t.addToHistory({img:e,barcode:"Not Detected",time:new Date}),t.setState({isLoading:!1}))}))}},{key:"toBase64",value:function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.barcodeDetected,n=void 0===a?"No Barcode Detected!!":a,o=t.uploadedImage,c=t.isLoading,i=void 0!==c&&c,l=t.barcodeType;return r.a.createElement("div",null,r.a.createElement(w.a,{style:{marginTop:"50px"}},r.a.createElement(O.a,{lg:6},r.a.createElement(T.a,{style:{border:"2px solid #000000"},lg:6},o?r.a.createElement("div",null,r.a.createElement("img",{id:"uploaded-image",alt:"barcode-image",src:o,height:"100%",width:"100%"}),r.a.createElement("canvas",{id:"my-canvas",height:"1000px",width:"1000px"})):r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("img",{src:C.a,alt:"upload something",height:"400"})),"Upload a image to scan barcode")),r.a.createElement(T.a,{lg:"6"},r.a.createElement(O.a,{style:{marginTop:"15px",marginLeft:"0",marginRight:"auto"}},r.a.createElement(R.a,{className:"text-center",border:"secondary",style:{width:"100%"}},r.a.createElement("input",{ref:function(t){return e.fileInput=t},type:"file",onChange:this.handleChange.bind(this),style:{display:"none"},accept:"image/jpeg"}),r.a.createElement(R.a.Body,{style:{width:"100%",height:"130px"}},r.a.createElement(g.a,{onClick:this.triggerInputFile}," Upload File "),r.a.createElement("p",null,"Upload any JPEG image with barcode")))),r.a.createElement(O.a,{style:{marginTop:"15px",marginLeft:"0",marginRight:"auto"}},r.a.createElement(R.a,{className:"text-center",border:"secondary",style:{width:"100%"}},r.a.createElement(R.a.Header,null,"Barcode Detected:"),r.a.createElement(R.a.Body,{style:{width:"100%",height:"130px"}},i?r.a.createElement(_.a,{animation:"border"}):r.a.createElement("div",null,r.a.createElement("p",null,"Barcode: ",n),l?r.a.createElement("p",null,"Barcode Type: ",l):r.a.createElement("p",null)))))))))}}]),a}(r.a.Component);D.contextType=y;var H=D,L=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(d.a)(a,[{key:"renderHistory",value:function(){var e=this.context.history;return(void 0===e?[]:e).map((function(e){return r.a.createElement(R.a,{style:{width:"40%",margin:"25px"}},r.a.createElement(R.a.Header,null,"Image Uploaded at ",e.time.toTimeString()),r.a.createElement(R.a.Body,null,r.a.createElement(w.a,null,r.a.createElement(O.a,null,r.a.createElement(T.a,null,r.a.createElement("img",{src:e.img,height:"40",width:"50"})),r.a.createElement("hr",null),r.a.createElement(T.a,null,"Barcode:",e.barcode,r.a.createElement("br",null),e.barcodeType?"Barcode Type: "+e.barcodeType:"")))))}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderHistory())}}]),a}(r.a.Component);L.contextType=y;var F=L,P=a(41),W=a(29),N=a(26),U=a(6),A=a.n(U);function M(e){return function(e){e.sort((function(e,t){return e-t}));var t=Math.floor(e.length/2);return e.length%2===1?e[t]:(e[t-1]+e[t])/2}(e.filter((function(e){return void 0!==e.error})).map((function(e){return e.error})))}var J={width:640,height:480},V={patchSize:"medium",halfSample:!0},q=["code_128_reader","ean_5_reader","upc_reader","ean_reader","ean_8_reader","ean_2_reader","code_39_reader","code_93_reader"],z=function(e){var t=e.onDetected,a=e.scannerRef,r=e.onScannerReady,o=e.cameraId,c=e.facingMode,i=e.constraints,l=void 0===i?J:i,d=e.locator,u=void 0===d?V:d,s=e.numOfWorkers,m=void 0===s?navigator.hardwareConcurrency||0:s,f=e.decoders,h=void 0===f?q:f,g=e.locate,v=void 0===g||g,p=Object(n.useCallback)((function(e){t&&(M(e.codeResult.decodedCodes)<.25&&t(e.codeResult.code))}),[t]),y=function(e){var t=I.a.canvas.ctx.overlay,a=I.a.canvas.dom.overlay;t.font="24px Arial",t.fillStyle="green",e&&(e.boxes&&(t.clearRect(0,0,parseInt(a.getAttribute("width")),parseInt(a.getAttribute("height"))),e.boxes.filter((function(t){return t!==e.box})).forEach((function(e){I.a.ImageDebug.drawPath(e,{x:0,y:1},t,{color:"purple",lineWidth:2})}))),e.box&&I.a.ImageDebug.drawPath(e.box,{x:0,y:1},t,{color:"blue",lineWidth:2}),e.codeResult&&e.codeResult.code&&(t.font="24px Arial",t.fillText(e.codeResult.code,10,20)))};return Object(n.useLayoutEffect)((function(){return I.a.init({inputStream:{type:"LiveStream",constraints:Object(N.a)(Object(N.a)(Object(N.a)({},l),o&&{deviceId:o}),!o&&{facingMode:c}),target:a.current},locator:u,numOfWorkers:m,decoder:{readers:h},locate:!0},(function(e){if(I.a.onProcessed(y),e)return console.log("Error starting Quagga:",e);a&&a.current&&(I.a.start(),r&&r())})),I.a.onDetected(p),function(){I.a.offDetected(p),I.a.offProcessed(y),I.a.stop()}}),[o,t,r,a,p,l,u,h,v]),null};z.propTypes={onDetected:A.a.func.isRequired,scannerRef:A.a.object.isRequired,onScannerReady:A.a.func,cameraId:A.a.string,facingMode:A.a.string,constraints:A.a.object,locator:A.a.object,numOfWorkers:A.a.number,decoders:A.a.array,locate:A.a.bool};var G=z,Q=function(e){var t=e.result;return r.a.createElement("li",null,t.codeResult.code," [",t.codeResult.format,"]")},$=function(){var e=Object(n.useState)(!1),t=Object(W.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)([]),i=Object(W.a)(c,2),l=i[0],d=i[1],u=Object(n.useRef)(null);return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return o(!a)}},a?"Stop":"Start"),r.a.createElement("ul",{className:"results"},l.map((function(e){return e.codeResult&&r.a.createElement(Q,{key:e.codeResult.code,result:e})}))),r.a.createElement("div",{ref:u,style:{position:"relative",border:"3px solid red"}},r.a.createElement("canvas",{className:"drawingBuffer",style:{position:"absolute",top:"0px",border:"3px solid green"},width:"640",height:"480"}),a?r.a.createElement(G,{scannerRef:u,onDetected:function(e){return d([].concat(Object(P.a)(l),[e]))}}):null))},K=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={currentTab:"fileScan",history:[],setVal:function(e){var t=e.key,a=e.value;return n.setState(Object(i.a)({},t,a))}},n}return Object(d.a)(a,[{key:"renderTab",value:function(){switch(this.state.currentTab){case"fileScan":return r.a.createElement(H,null);case"history":return r.a.createElement(F,null);case"liveScan":return r.a.createElement($,null)}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(p,{value:this.state},r.a.createElement(E,null),this.renderTab()))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(54);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.11e52731.chunk.js.map